{% extends "base.html" %} {% block content %}

<div class="container">
  <main role="main" class="container">
    <div class="starter-template">
      <h1>Pandemic Visualiser Homepage</h1>

      <div class="d-flex">
        <canvas width="300" height="300" id="myChart"></canvas>
        <canvas width="300" height="300" id="myChart1"></canvas>
        <canvas width="300" height="300" id="myChart2"></canvas>
      </div>

      <script>
        const labels = ["January", "February", "March", "April", "May", "June"];

        const covid_positive_labels = "{{covid_positive.labels|safe}}";
        const covid_positive_data = "{{covid_positive.data|safe}}";

        const deceased_labels = "{{deceased.labels|safe}}";
        const deceased_data = "{{deceased.data|safe}}";

        const recovered_labels = "{{recovered.labels|safe}}";
        const recovered_data = "{{recovered.data|safe}}";

        const data = {
          labels: covid_positive_labels,
          datasets: [
            {
              label: "CONFIRMED",
              backgroundColor: "red",
              borderColor: "red",
              data: covid_positive_data,
            },
          ],
        };

        const config = {
          type: "line",
          data: data,
          options: {
            responsive: false,
            maintainAspectRatio: false,
            plugins: {
              subtitle: {
                display: true,
                text: "{{covid_positive.sum|safe}}",
              },
            },
          },
        };
        const data1 = {
          labels: deceased_labels,
          datasets: [
            {
              label: "ACTIVE",
              backgroundColor: "orange",
              borderColor: "orange",
              data: deceased_data,
            },
          ],
        };

        const config1 = {
          type: "line",
          data: data1,
          options: {
            responsive: false,
            maintainAspectRatio: false,
            plugins: {
              subtitle: {
                display: true,
                text: "{{deceased.sum|safe}}",
              },
            },
          },
        };
        const data2 = {
          labels: recovered_labels,
          datasets: [
            {
              label: "RECOVERED",
              backgroundColor: "green",
              borderColor: "green",
              data: recovered_data,
            },
          ],
        };

        const config2 = {
          type: "line",
          data: data2,
          options: {
            responsive: false,
            maintainAspectRatio: false,
            plugins: {
              subtitle: {
                display: true,
                text: "{{recovered.sum|safe}}",
              },
            },
          },
        };
      </script>

      <script>
        const myChart = new Chart(document.getElementById("myChart"), config);
        const myChart1 = new Chart(
          document.getElementById("myChart1"),
          config1
        );
        const myChart2 = new Chart(
          document.getElementById("myChart2"),
          config2
        );
      </script>
    </div>
  </main>
</div>

{% endblock content %}
